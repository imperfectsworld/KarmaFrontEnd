<h1>Welcome {{ googleUser.userName }}!</h1>
@if(newItem == false){
<button class="Success" (click)="toggleFormDisplay()" >Donate an Item</button>
}
@else{
<div>
  <p>Item name: <input type="text" [(ngModel)]="formItem.name" /></p>
  <p>
    Item description: <input type="text" [(ngModel)]="formItem.description" />
  </p>

  <p>
    Category:
    <select [(ngModel)]="selectedCategory">
      @for(c of category; track $index){
      <option [value]="c.label">{{ c.label }}</option>
      }
    </select>
  </p>
  <p>
    Condition: @if(selectedCategory === "Food"){
    <select [(ngModel)]="foodCondition">
      @for(c of foodCondition; track $index){
      <option [value]="c.label">{{ c.label }}</option>
      }
    </select>
    } @else if(selectedCategory === "Services") {
    <select [(ngModel)]="selectedCondition" [disabled]="true"></select>
    } @else{
    <select [(ngModel)]="selectedCondition">
      @for(c of condition; track $index){
      <option [value]="c.label">{{ c.label }}</option>
      }
    </select>
    }
  </p>
  <p>Location: <input type="text" [(ngModel)]="formItem.geoCode" /></p>
  <p> Ex: 13700 Middlebelt Rd, Livonia, MI</p>
  <input type="file" (change)="onFileSelected($event)" class="file-input" />
  @if(selectedFile){
  <button (click)="uploadImageAndAddItem()">Add Item</button>
  }
</div>
}

<!-- Sort dropdown menu -->
<p>
  Sort by:
  <select (change)="onSortChange($event)">
    <option value="" disabled selected>Select sorting option</option>
    <option value="newest">Most Recent</option>
    <option value="oldest">Oldest</option>
    <option value="alphabetical">A-Z</option>
    <option value="reverseAlphabetical">Z-A</option>
  </select>
</p>

<!-- Condition filter -->
<p>
  Condition:
  <select [(ngModel)]="selectedCondition" (change)="onConditionChange(selectedCondition)">
    <option value="">All Conditions</option>
    <option value="Mint">Mint</option>
    <option value="Like New">Like New</option>
    <option value="Used">Used</option>
    <option value="Worn">Worn</option>
    <option value="Broken">Broken</option>

    
  </select>
</p>

<!-- Category filter -->
 <p>
Filter by Category:
<select [(ngModel)]="selectedCategory" (change)="onCategoryChange(selectedCategory)">
  <option value="">All Categories</option>
  <option value="Food">Food</option>
  <option value="Furniture">Furniture</option>
  <option value="Car Seats">Car Seats</option>
  <option value="Electronics">Electronics</option>
  <option value="Clothing">Clothing</option>
  <option value="Stroller">Stroller</option>
  <option value="Nursing & Feeding">Nursing & Feeding</option>
  <option value="Playards">Playards</option>
  <option value="Bassinets">Bassinets</option>
  <option value="Infant Activity">Infant Activity</option>
  <option value="Infant Toys">Infant Toys</option>
</select>
</p>

<h1>Free Items</h1>
@for(i of filteredItems; track i.id){  <!-- MADE THIS filtered items instead-->
  @if(i.pic){
    <img [src]="i.pic" alt="Item image" style="width: 150px; height: 150px;" />
  }
<p>{{ i.name }}</p>
<p>{{ i.description }}</p>
<p>{{ i.condition }}</p>

<button (click)="openLocation(i.geoCode)" type="button">
  Location
</button> 
 @if(i.googleId === googleUser.googleId){
  <button (click)="deleteItem(i.id)">Delete</button> 
 }

@if(i.google != null){
  <p>Posted by {{ i.google.userName }}</p>
  }
 
}